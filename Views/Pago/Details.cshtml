@model INMOBILIARIA__Oliva_Perez.Models.Pago
@{
    ViewData["Title"] = "Detalle de Pago";
    var usuarios = ViewBag.Usuarios as Dictionary<int, string> ?? new Dictionary<int, string>();
}

<h2>Detalle de Pago</h2>

<div class="card">
    <div class="card-body">
        <p><strong>Número de pago:</strong> @Model.NumeroPago</p>
        <p><strong>Fecha de pago:</strong> @Model.FechaPago.ToShortDateString()</p>
        <p><strong>Monto:</strong> @Model.Monto</p>
        <p><strong>Contrato:</strong> @Model.ContratoId</p>
        <p><strong>Estado:</strong> @Model.Estado</p>
       <p><strong>Última actualización:</strong> @Model.FechaUpdate.ToShortDateString()</p>

        @if (ViewBag.EsAdmin)
{

        @if (Model.AnuladoPor.HasValue)
        {
            <p><strong>Creado por:</strong> @(Model.CreadoPor.HasValue && usuarios.ContainsKey(Model.CreadoPor.Value) ? usuarios[Model.CreadoPor.Value] : "Desconocido")</p> 
            <p><strong>Anulado por:</strong> @(usuarios.ContainsKey(Model.AnuladoPor.Value) ? usuarios[Model.AnuladoPor.Value] : "Desconocido")</p>
            <p><strong>Fecha de anulación:</strong> @(Model.AnuladoEn.HasValue ? Model.AnuladoEn.Value.ToShortDateString() : "N/A")</p>
        }
        }
    </div>
    
</div>

<p>
    <a class="btn btn-warning" asp-action="Edit" asp-route-id="@(Model.Id)">Editar</a>
    <a class="btn btn-secondary" asp-action="Index">Volver</a>
</p>
